!function(t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():window.GemSlider=t()}(function(){function t(i,e){if(!(this instanceof t))return new t(i,e);this.element="string"==typeof i?document.querySelector(i):i,this.options=Object.assign({},t.defaults,e),this.init()}return t.defaults={slidesToShow:1,slidesToScroll:1,itemWidth:void 0,exactWidth:!1,duration:.5,dots:null,arrows:{prev:null,next:null},draggable:!0,dragVelocity:1.5,easing:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},scrollLock:!0,scrollLockDelay:150,resizeLock:!0,responsive:null,rewind:!1,autoplay:!1,autoplaySpeed:3e3,pauseOnHover:!0,centerMode:!1,infinite:!1},t.prototype={init:function(){this.track=this.element.querySelector(".gem-track")||this.element.firstElementChild,this.slides=Array.from(this.track.children),this.slidesCount=this.slides.length,this.currentSlide=0,this.scrolling=!1,this.bindEvents(),this.updateLayout(),this.attachControls(),this.setupAutoplay(),this.element.classList.add("gem-loaded"),this.emit("gem-loaded",{gemSlider:this})},bindEvents:function(){window.addEventListener("resize",this.debouncedResize.bind(this)),this.options.draggable&&(this.track.addEventListener("mousedown",this.dragStart.bind(this)),this.track.addEventListener("touchstart",this.dragStart.bind(this)))},updateLayout:function(){let t=this.options.exactWidth?this.options.itemWidth:this.element.clientWidth/this.options.slidesToShow;this.slides.forEach(i=>{i.style.width=`${t}px`}),this.track.style.width=`${t*this.slidesCount}px`,this.options.centerMode&&(this.track.style.padding=`0 ${this.element.clientWidth/2-t/2}px`),this.updateSlideVisibility()},attachControls:function(){this.options.dots&&this.createDots(),this.options.arrows.prev&&this.options.arrows.next&&this.attachArrows()},createDots:function(){let t=document.querySelector(this.options.dots);if(t){for(let i=0;i<this.slidesCount;i++){let e=document.createElement("button");e.classList.add("gem-dot"),e.addEventListener("click",()=>this.scrollTo(i)),t.appendChild(e)}this.dots=t.querySelectorAll(".gem-dot"),this.updateActiveDot()}},attachArrows:function(){let t=document.querySelector(this.options.arrows.prev),i=document.querySelector(this.options.arrows.next);t&&t.addEventListener("click",this.prev.bind(this)),i&&i.addEventListener("click",this.next.bind(this))},dragStart:function(t){this.scrolling||(this.dragging=!0,this.startX="touchstart"===t.type?t.touches[0].clientX:t.clientX,this.startY="touchstart"===t.type?t.touches[0].clientY:t.clientY,this.startPosition=this.track.scrollLeft,document.addEventListener("mousemove",this.dragging.bind(this)),document.addEventListener("touchmove",this.dragging.bind(this)),document.addEventListener("mouseup",this.dragEnd.bind(this)),document.addEventListener("touchend",this.dragEnd.bind(this)))},dragging:function(t){if(!this.dragging)return;let i="touchmove"===t.type?t.touches[0].clientX:t.clientX,e="touchmove"===t.type?t.touches[0].clientY:t.clientY,s=i-this.startX,n=e-this.startY;Math.abs(s)>Math.abs(n)&&(t.preventDefault(),this.track.scrollLeft=this.startPosition-s)},dragEnd:function(){this.dragging=!1,document.removeEventListener("mousemove",this.dragging),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("touchend",this.dragEnd);let t=this.track.scrollLeft,i=this.slides[0].offsetWidth,e=Math.round((t-this.startPosition)/i);this.scrollTo(this.currentSlide+e)},scrollTo:function(t){if(this.scrolling)return;this.scrolling=!0;let i=t;i=this.options.infinite?(t+this.slidesCount)%this.slidesCount:this.options.rewind?t<0?this.slidesCount-1:t>=this.slidesCount?0:t:Math.max(0,Math.min(t,this.slidesCount-1));let e=this.slides[i].offsetLeft-(this.options.centerMode?(this.element.clientWidth-this.slides[i].offsetWidth)/2:0),s=this.track.scrollLeft,n=e-s,o=performance.now(),r=t=>{let e=Math.min((t-o)/(1e3*this.options.duration),1),h=this.options.easing(e);this.track.scrollLeft=s+n*h,e<1?requestAnimationFrame(r):(this.scrolling=!1,this.currentSlide=i,this.updateSlideVisibility(),this.updateActiveDot(),this.emit("gem-slide-visible",{gemSlider:this,slideIndex:this.currentSlide}))};requestAnimationFrame(r)},prev:function(){this.scrollTo(this.currentSlide-this.options.slidesToScroll)},next:function(){this.scrollTo(this.currentSlide+this.options.slidesToScroll)},updateSlideVisibility:function(){this.slides.forEach((t,i)=>{let e=i>=this.currentSlide&&i<this.currentSlide+this.options.slidesToShow;t.classList.toggle("gem-slide-visible",e),e?this.emit("gem-slide-visible",{gemSlider:this,slideIndex:i}):this.emit("gem-slide-hidden",{gemSlider:this,slideIndex:i})})},updateActiveDot:function(){this.dots&&this.dots.forEach((t,i)=>{t.classList.toggle("gem-dot-active",i===this.currentSlide)})},setupAutoplay:function(){this.options.autoplay&&(this.autoplayInterval=setInterval(()=>{!this.options.infinite&&this.currentSlide>=this.slidesCount-this.options.slidesToShow?this.scrollTo(0):this.next()},this.options.autoplaySpeed),this.options.pauseOnHover&&(this.element.addEventListener("mouseenter",this.pauseAutoplay.bind(this)),this.element.addEventListener("mouseleave",this.resumeAutoplay.bind(this))))},pauseAutoplay:function(){clearInterval(this.autoplayInterval)},resumeAutoplay:function(){this.setupAutoplay()},debouncedResize:function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.updateLayout(),this.emit("gem-resize",{gemSlider:this})},250)},refresh:function(){this.updateLayout(),this.emit("gem-refresh",{gemSlider:this})},setOption:function(t,i){this.options[t]=i,this.refresh()},destroy:function(){if(clearInterval(this.autoplayInterval),window.removeEventListener("resize",this.debouncedResize),this.track.removeEventListener("mousedown",this.dragStart),this.track.removeEventListener("touchstart",this.dragStart),this.element.classList.remove("gem-loaded"),this.slides.forEach(t=>{t.style.width="",t.classList.remove("gem-slide-visible")}),this.track.style.width="",this.track.style.padding="",this.options.dots){let t=document.querySelector(this.options.dots);t&&(t.innerHTML="")}this.emit("gem-destroy",{gemSlider:this})},emit:function(t,i){let e=new CustomEvent(t,{bubbles:!0,detail:i});this.element.dispatchEvent(e)}},t});